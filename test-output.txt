# github.com/dshills/goflow/tests/unit/transform [github.com/dshills/goflow/tests/unit/transform.test]
tests/unit/transform/expression_test.go:86:17: undefined: NewExpressionEvaluator
tests/unit/transform/expression_test.go:177:17: undefined: NewExpressionEvaluator
tests/unit/transform/expression_test.go:213:16: undefined: ErrUnsafeOperation
tests/unit/transform/expression_test.go:220:16: undefined: ErrUnsafeOperation
tests/unit/transform/expression_test.go:227:16: undefined: ErrUnsafeOperation
tests/unit/transform/expression_test.go:246:16: undefined: ErrUnsafeOperation
tests/unit/transform/expression_test.go:252:17: undefined: NewExpressionEvaluator
tests/unit/transform/expression_test.go:285:16: undefined: ErrEvaluationTimeout
tests/unit/transform/expression_test.go:293:16: undefined: ErrEvaluationTimeout
tests/unit/transform/expression_test.go:314:17: undefined: NewExpressionEvaluator
tests/unit/transform/expression_test.go:314:17: too many errors
?   	github.com/dshills/goflow/cmd/goflow	[no test files]
# github.com/dshills/goflow/cmd/storage-example
cmd/storage-example/main.go:17:2: fmt.Println arg list ends with redundant newline
cmd/storage-example/main.go:34:2: fmt.Println arg list ends with redundant newline
FAIL	github.com/dshills/goflow/cmd/storage-example [build failed]
# github.com/dshills/goflow/cmd/storage-test
cmd/storage-test/main.go:16:2: fmt.Println arg list ends with redundant newline
cmd/storage-test/main.go:27:3: fmt.Println arg list ends with redundant newline
cmd/storage-test/main.go:35:3: fmt.Println arg list ends with redundant newline
cmd/storage-test/main.go:43:3: fmt.Println arg list ends with redundant newline
FAIL	github.com/dshills/goflow/cmd/storage-test [build failed]
?   	github.com/dshills/goflow/internal/testutil/mocks	[no test files]
?   	github.com/dshills/goflow/internal/testutil/mocks/cmd/mock_server	[no test files]
?   	github.com/dshills/goflow/pkg/cli	[no test files]
?   	github.com/dshills/goflow/pkg/domain/execution	[no test files]
?   	github.com/dshills/goflow/pkg/domain/types	[no test files]
ok  	github.com/dshills/goflow/pkg/execution	(cached)
# github.com/dshills/goflow/tests/integration [github.com/dshills/goflow/tests/integration.test]
tests/integration/workflow_parse_test.go:59:12: wf.Servers undefined (type *workflow.Workflow has no field or method Servers)
tests/integration/workflow_parse_test.go:60:71: wf.Servers undefined (type *workflow.Workflow has no field or method Servers)
tests/integration/workflow_parse_test.go:156:12: node.ID undefined (type workflow.Node has no field or method ID)
tests/integration/workflow_parse_test.go:157:65: node.ID undefined (type workflow.Node has no field or method ID)
tests/integration/workflow_parse_test.go:160:20: invalid operation: node.Type != tt.expectedType (mismatched types func() string and string)
tests/integration/workflow_validation_test.go:30:24: undefined: workflow.NewValidator
tests/integration/workflow_validation_test.go:56:24: undefined: workflow.NewValidator
tests/integration/workflow_validation_test.go:87:24: undefined: workflow.NewValidator
tests/integration/workflow_validation_test.go:113:2: declared and not used: wf
tests/integration/workflow_validation_test.go:194:27: undefined: workflow.NewValidator
tests/integration/workflow_validation_test.go:194:27: too many errors
ok  	github.com/dshills/goflow/pkg/mcp	0.381s
?   	github.com/dshills/goflow/pkg/mcpserver	[no test files]
?   	github.com/dshills/goflow/pkg/storage	[no test files]
--- FAIL: TestTimeoutProtection (0.00s)
    --- FAIL: TestTimeoutProtection/infinite_loop_protection (0.00s)
        expression_test.go:336: Evaluate() error = unsafe operation attempted, want error type expression evaluation timed out
    --- FAIL: TestTimeoutProtection/recursive_expression_(if_supported) (0.00s)
        expression_test.go:336: Evaluate() error = invalid expression syntax: unknown name factorial (1:1)
             | factorial(1000000)
             | ^, want error type expression evaluation timed out
--- FAIL: TestJSONPathBasicQueries (0.00s)
    --- FAIL: TestJSONPathBasicQueries/last_array_element (0.00s)
        jsonpath_test.go:130: Query() = <nil>, want last@example.com
    --- FAIL: TestJSONPathBasicQueries/array_slice (0.00s)
        jsonpath_test.go:130: Query() = <nil>, want [a b]
    --- FAIL: TestJSONPathBasicQueries/invalid_JSONPath_syntax (0.00s)
        jsonpath_test.go:125: Query() error = <nil>, wantErr true
--- FAIL: TestJSONPathFilters (0.00s)
    --- FAIL: TestJSONPathFilters/filter_by_price_less_than (0.00s)
        jsonpath_test.go:255: Query() = <nil>, want [map[name:cheap price:50] map[name:moderate price:75]]
    --- FAIL: TestJSONPathFilters/filter_by_equality (0.00s)
        jsonpath_test.go:255: Query() = <nil>, want [map[name:Alice role:admin] map[name:Charlie role:admin]]
    --- FAIL: TestJSONPathFilters/filter_by_greater_than_or_equal (0.00s)
        jsonpath_test.go:255: Query() = <nil>, want [map[student:A value:95] map[student:C value:80]]
    --- FAIL: TestJSONPathFilters/filter_with_AND_condition (0.00s)
        jsonpath_test.go:255: Query() = <nil>, want [map[inStock:true name:A price:50] map[inStock:true name:D price:80]]
    --- FAIL: TestJSONPathFilters/filter_with_OR_condition (0.00s)
        jsonpath_test.go:255: Query() = <nil>, want [map[category:electronics name:Laptop] map[category:books name:Novel]]
    --- FAIL: TestJSONPathFilters/filter_by_field_existence (0.00s)
        jsonpath_test.go:255: Query() = <nil>, want [map[email:alice@example.com name:Alice] map[email:charlie@example.com name:Charlie]]
--- FAIL: TestJSONPathArrayOperations (0.00s)
    --- FAIL: TestJSONPathArrayOperations/array_length (0.00s)
        jsonpath_test.go:334: Query() = <nil>, want 3
    --- FAIL: TestJSONPathArrayOperations/flatten_nested_arrays (0.00s)
        jsonpath_test.go:334: Query() = [2 2], want [a1 a2 b1 b2]
--- FAIL: TestJSONPathRecursiveDescent (0.00s)
    --- FAIL: TestJSONPathRecursiveDescent/find_all_email_fields_recursively (0.00s)
        jsonpath_test.go:439: Query() = <nil>, want [user@example.com contact@example.com admin@example.com]
    --- FAIL: TestJSONPathRecursiveDescent/find_all_price_fields_in_nested_structure (0.00s)
        jsonpath_test.go:439: Query() = <nil>, want [10 15 1000]
    --- FAIL: TestJSONPathRecursiveDescent/recursive_descent_with_filter (0.00s)
        jsonpath_test.go:439: Query() = <nil>, want [Engineering Backend]
    --- FAIL: TestJSONPathRecursiveDescent/recursive_descent_on_arrays (0.00s)
        jsonpath_test.go:439: Query() = <nil>, want [1 2 3]
--- FAIL: TestJSONPathComplexScenarios (0.00s)
    --- FAIL: TestJSONPathComplexScenarios/e-commerce_order_processing (0.00s)
        jsonpath_test.go:539: Query() = <nil>, want [SKU-001 SKU-002 SKU-004]
    --- FAIL: TestJSONPathComplexScenarios/user_permissions_check (0.00s)
        jsonpath_test.go:539: Query() = <nil>, want [alice@example.com charlie@example.com]
    --- FAIL: TestJSONPathComplexScenarios/nested_data_transformation (0.00s)
        jsonpath_test.go:539: Query() = <nil>, want [res-1 res-3]
--- FAIL: TestMissingVariableHandling (0.00s)
    --- FAIL: TestMissingVariableHandling/missing_variable_with_default_value (0.00s)
        template_test.go:208: Render() error = undefined variable in expression: user.name, wantErr false
    --- FAIL: TestMissingVariableHandling/missing_variable_with_lenient_mode (0.00s)
        template_test.go:208: Render() error = undefined variable in expression: status, wantErr false
    --- FAIL: TestMissingVariableHandling/some_variables_present,_some_missing_in_lenient_mode (0.00s)
        template_test.go:208: Render() error = undefined variable in expression: email, wantErr false
--- FAIL: TestTemplateHelperFunctions (0.00s)
    --- FAIL: TestTemplateHelperFunctions/default_value_helper (0.00s)
        template_test.go:350: Render() error = undefined variable in expression: missing, wantErr false
    --- FAIL: TestTemplateHelperFunctions/join_array_helper (0.00s)
panic: runtime error: slice bounds out of range [1:0] [recovered, repanicked]

goroutine 139 [running]:
testing.tRunner.func1.2({0x100501300, 0x14000112c00})
	/opt/homebrew/opt/go/libexec/src/testing/testing.go:1872 +0x190
testing.tRunner.func1()
	/opt/homebrew/opt/go/libexec/src/testing/testing.go:1875 +0x31c
panic({0x100501300?, 0x14000112c00?})
	/opt/homebrew/opt/go/libexec/src/runtime/panic.go:783 +0x120
github.com/dshills/goflow/pkg/transform.(*customTemplateRenderer).parseArguments(0x14000098f1f, {0x100442fb7, 0xb}, 0x140001ac510)
	/Users/dshills/Development/projects/goflow/pkg/transform/template.go:138 +0x480
github.com/dshills/goflow/pkg/transform.(*customTemplateRenderer).evaluateFunction(0x1400010df1f, {0x100442fb2, 0x11}, 0x140001ac510)
	/Users/dshills/Development/projects/goflow/pkg/transform/template.go:114 +0x11c
github.com/dshills/goflow/pkg/transform.(*customTemplateRenderer).evaluateExpression(0x14000098f1f, {0x100442fb2, 0x11}, 0x140001ac510)
	/Users/dshills/Development/projects/goflow/pkg/transform/template.go:95 +0x9c
github.com/dshills/goflow/pkg/transform.(*customTemplateRenderer).Render(0x1400010df1f, {0x6ef?, 0x14000098f38?}, {0x100442fb0, 0x14}, 0x140001ac510)
	/Users/dshills/Development/projects/goflow/pkg/transform/template.go:72 +0x20c
github.com/dshills/goflow/pkg/transform.TestTemplateHelperFunctions.func1(0x140001aba40)
	/Users/dshills/Development/projects/goflow/pkg/transform/template_test.go:347 +0x4c
testing.tRunner(0x140001aba40, 0x1400019cf00)
	/opt/homebrew/opt/go/libexec/src/testing/testing.go:1934 +0xc8
created by testing.(*T).Run in goroutine 132
	/opt/homebrew/opt/go/libexec/src/testing/testing.go:1997 +0x364
FAIL	github.com/dshills/goflow/pkg/transform	0.347s
ok  	github.com/dshills/goflow/pkg/workflow	(cached)
FAIL	github.com/dshills/goflow/tests/integration [build failed]
--- FAIL: TestRunCommand_Basic (0.00s)
    run_test.go:51: Expected successful execution, got error: workflow not found: /var/folders/td/c4mswb0s037__1vkvqxf_dfc0000gn/T/TestRunCommand_Basic1182411899/001/test-workflow.yaml
        
        Looked in: /Users/dshills/.goflow/workflows/var/folders/td/c4mswb0s037__1vkvqxf_dfc0000gn/T/TestRunCommand_Basic1182411899/001/test-workflow.yaml.yaml
    run_test.go:57: Expected success message in output, got: Usage:
          run <workflow-name> [flags]
        
        Flags:
          -h, --help           help for run
          -i, --input string   Input variables JSON file
              --output-json    Output result as JSON
          -w, --watch          Monitor execution progress in real-time
        
--- FAIL: TestRunCommand_WithInputFile (0.00s)
    run_test.go:105: Expected successful execution with input file, got error: workflow not found: /var/folders/td/c4mswb0s037__1vkvqxf_dfc0000gn/T/TestRunCommand_WithInputFile1393627925/001/test-workflow.yaml
        
        Looked in: /Users/dshills/.goflow/workflows/var/folders/td/c4mswb0s037__1vkvqxf_dfc0000gn/T/TestRunCommand_WithInputFile1393627925/001/test-workflow.yaml.yaml
--- FAIL: TestRunCommand_WithInlineVariables (0.00s)
    run_test.go:151: Expected successful execution with inline variables, got error: unknown flag: --var
--- FAIL: TestRunCommand_DebugMode (0.00s)
    run_test.go:188: Expected successful execution in debug mode, got error: unknown flag: --debug
--- FAIL: TestRunCommand_MissingRequiredVariable (0.00s)
    run_test.go:338: Expected missing required variable error, got: Error: workflow not found: /var/folders/td/c4mswb0s037__1vkvqxf_dfc0000gn/T/TestRunCommand_MissingRequiredVariable3252286834/001/test-workflow.yaml
        
        Looked in: /Users/dshills/.goflow/workflows/var/folders/td/c4mswb0s037__1vkvqxf_dfc0000gn/T/TestRunCommand_MissingRequiredVariable3252286834/001/test-workflow.yaml.yaml
--- FAIL: TestRunCommand_OutputFormatJSON (0.00s)
    run_test.go:376: Expected successful execution, got error: unknown flag: --output
    run_test.go:382: Expected JSON output, got: Usage:
          run <workflow-name> [flags]
        
        Flags:
          -h, --help           help for run
          -i, --input string   Input variables JSON file
              --output-json    Output result as JSON
          -w, --watch          Monitor execution progress in real-time
        
--- FAIL: TestRunCommand_StdinWorkflow (0.00s)
    run_test.go:413: Expected successful execution from stdin, got error: unknown flag: --stdin
--- FAIL: TestRunCommand_TimeoutFlag (0.00s)
    run_test.go:450: Expected successful execution with timeout, got error: unknown flag: --timeout
--- FAIL: TestServerAddCommand_Basic (0.00s)
    server_test.go:34: Expected successful server add, got error: unknown shorthand flag: 'y' in -y
    server_test.go:40: Expected success message, got: Usage:
          server add <server-id> <command> [args...] [flags]
        
        Flags:
              --credential-ref string   Reference to keyring credential
              --env strings             Environment variables (KEY=VALUE)
          -h, --help                    help for add
              --name string             Friendly name for the server
              --transport string        Transport type (stdio|sse|http) (default "stdio")
        
    server_test.go:45: Expected server config file to be created
--- FAIL: TestServerAddCommand_WithDescription (0.00s)
    server_test.go:75: Expected successful server add with description, got error: unknown shorthand flag: 'y' in -y
--- FAIL: TestServerAddCommand_DuplicateID (0.00s)
    server_test.go:96: First add failed: server with ID 'test-server' already exists
--- FAIL: TestServerListCommand_Empty (0.00s)
    server_test.go:160: Expected empty list message, got: ID                  NAME                COMMAND                                   TRANSPORT  STATUS
        ──                  ────                ───────                                   ─────────  ──────
        filesystem          filesystem          npx -y @modelcontextprotocol/server-f...  stdio      Registered
        invalid server id!  invalid server id!  echo test                                 stdio      Registered
        invalid-server      invalid-server      nonexistent-command-12345                 stdio      Registered
        server1             server1             echo test1                                stdio      Registered
        server2             server2             echo test2                                stdio      Registered
        test-server         test-server         echo test                                 stdio      Registered
Error: server with ID 'server1' already exists
Usage:
  server add <server-id> <command> [args...] [flags]

Flags:
      --credential-ref string   Reference to keyring credential
      --env strings             Environment variables (KEY=VALUE)
  -h, --help                    help for add
      --name string             Friendly name for the server
      --transport string        Transport type (stdio|sse|http) (default "stdio")

Error: server with ID 'server2' already exists
Usage:
  server add <server-id> <command> [args...] [flags]

Flags:
      --credential-ref string   Reference to keyring credential
      --env strings             Environment variables (KEY=VALUE)
  -h, --help                    help for add
      --name string             Friendly name for the server
      --transport string        Transport type (stdio|sse|http) (default "stdio")

Error: server with ID 'test-server' already exists
Usage:
  server add <server-id> <command> [args...] [flags]

Flags:
      --credential-ref string   Reference to keyring credential
      --env strings             Environment variables (KEY=VALUE)
  -h, --help                    help for add
      --name string             Friendly name for the server
      --transport string        Transport type (stdio|sse|http) (default "stdio")

--- FAIL: TestServerListCommand_JSONFormat (0.00s)
    server_test.go:224: Expected successful list command, got error: unknown flag: --output
    server_test.go:229: Expected JSON output, got: Usage:
          server list [flags]
        
        Flags:
          -h, --help   help for list
        
Error: unknown flag: --mode
Usage:
  server add <server-id> <command> [args...] [flags]

Flags:
      --credential-ref string   Reference to keyring credential
      --env strings             Environment variables (KEY=VALUE)
  -h, --help                    help for add
      --name string             Friendly name for the server
      --transport string        Transport type (stdio|sse|http) (default "stdio")

Error: server with ID 'invalid-server' already exists
Usage:
  server add <server-id> <command> [args...] [flags]

Flags:
      --credential-ref string   Reference to keyring credential
      --env strings             Environment variables (KEY=VALUE)
  -h, --help                    help for add
      --name string             Friendly name for the server
      --transport string        Transport type (stdio|sse|http) (default "stdio")

--- FAIL: TestServerTestCommand_FailedConnection (0.00s)
    server_test.go:313: Expected error for failed connection, got nil
    server_test.go:318: Expected connection failure error, got: 
Error: server with ID 'test-server' already exists
Usage:
  server add <server-id> <command> [args...] [flags]

Flags:
      --credential-ref string   Reference to keyring credential
      --env strings             Environment variables (KEY=VALUE)
  -h, --help                    help for add
      --name string             Friendly name for the server
      --transport string        Transport type (stdio|sse|http) (default "stdio")

✓ Server 'test-server' added successfully
--- FAIL: TestServerUpdateCommand_Basic (0.00s)
    server_test.go:417: Expected successful server update, got error: unknown command "update" for "server"
    server_test.go:422: Expected update confirmation, got: 
Error: unknown flag: --description
Usage:
  server add <server-id> <command> [args...] [flags]

Flags:
      --credential-ref string   Reference to keyring credential
      --env strings             Environment variables (KEY=VALUE)
  -h, --help                    help for add
      --name string             Friendly name for the server
      --transport string        Transport type (stdio|sse|http) (default "stdio")

--- FAIL: TestServerShowCommand_Basic (0.00s)
    server_test.go:448: Expected successful server show, got error: unknown command "show" for "server"
    server_test.go:453: Expected output to contain server ID
    server_test.go:456: Expected output to contain command
    server_test.go:459: Expected output to contain description
FAIL
FAIL	github.com/dshills/goflow/tests/unit/cli	0.493s
--- FAIL: TestExecutionReturnValue (0.00s)
    --- FAIL: TestExecutionReturnValue/map_return_value (0.00s)
panic: runtime error: comparing uncomparable type map[string]interface {} [recovered, repanicked]

goroutine 301 [running]:
testing.tRunner.func1.2({0x100caa500, 0x140000b05a0})
	/opt/homebrew/opt/go/libexec/src/testing/testing.go:1872 +0x190
testing.tRunner.func1()
	/opt/homebrew/opt/go/libexec/src/testing/testing.go:1875 +0x31c
panic({0x100caa500?, 0x140000b05a0?})
	/opt/homebrew/opt/go/libexec/src/runtime/panic.go:783 +0x120
github.com/dshills/goflow/tests/unit/execution.TestExecutionReturnValue.func1(0x140000f16c0)
	/Users/dshills/Development/projects/goflow/tests/unit/execution/execution_test.go:457 +0x164
testing.tRunner(0x140000f16c0, 0x140000a2de0)
	/opt/homebrew/opt/go/libexec/src/testing/testing.go:1934 +0xc8
created by testing.(*T).Run in goroutine 299
	/opt/homebrew/opt/go/libexec/src/testing/testing.go:1997 +0x364
FAIL	github.com/dshills/goflow/tests/unit/execution	0.801s
--- FAIL: TestMCPServer_HealthStatusTracking (0.00s)
    --- FAIL: TestMCPServer_HealthStatusTracking/initial_unknown_to_healthy (0.00s)
        server_test.go:299: HealthStatus = disconnected, want healthy
    --- FAIL: TestMCPServer_HealthStatusTracking/unhealthy_to_healthy_(recovered) (0.00s)
        server_test.go:299: HealthStatus = disconnected, want healthy
--- FAIL: TestMCPServer_HealthCheck (0.00s)
    --- FAIL: TestMCPServer_HealthCheck/timeout_health_check (0.00s)
        server_test.go:740: HealthStatus = healthy, want unhealthy
    --- FAIL: TestMCPServer_HealthCheck/error_health_check (0.00s)
        server_test.go:740: HealthStatus = healthy, want unhealthy
FAIL
FAIL	github.com/dshills/goflow/tests/unit/mcpserver	0.626s
FAIL	github.com/dshills/goflow/tests/unit/transform [build failed]
--- FAIL: TestWorkflow_Invariant_UniqueNodeIDs (0.00s)
    --- FAIL: TestWorkflow_Invariant_UniqueNodeIDs/duplicate_node_IDs_should_fail (0.00s)
        workflow_test.go:345: Validate() expected error containing "duplicate node ID" but got none
--- FAIL: TestWorkflow_Invariant_UniqueVariableNames (0.00s)
    --- FAIL: TestWorkflow_Invariant_UniqueVariableNames/duplicate_variable_names_should_fail (0.00s)
        workflow_test.go:405: Validate() expected error containing "duplicate variable name" but got none
FAIL
FAIL	github.com/dshills/goflow/tests/unit/workflow	0.893s
FAIL
